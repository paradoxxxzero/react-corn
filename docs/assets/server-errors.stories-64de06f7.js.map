{"version":3,"file":"server-errors.stories-64de06f7.js","sources":["../../stories/overview/server-errors.stories.jsx"],"sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\nimport { useCorn } from '@react-corn/core';\nimport { ButtonRow, Number, Text } from '@react-corn/simple';\nimport { memo, useCallback, useState } from 'react';\nimport { Story } from '../helpers/Story';\nexport default {\n  title: 'Overview/server-errors',\n  parameters: {\n    options: {\n      showPanel: true\n    }\n  }\n};\nconst CornForm = memo(({\n  item,\n  onItem,\n  onTransient,\n  onDelta,\n  onErrors\n}) => {\n  const [loading, setLoading] = useState(false);\n  const handleChange = useCallback((transient, delta, errors) => {\n    onTransient(transient);\n    onErrors(errors);\n  }, [onErrors, onTransient]);\n  const handleSubmit = useCallback(async (item, delta) => {\n    // Simulate an async wait\n    setLoading(true);\n    await new Promise(resolve => setTimeout(() => resolve(), 1000));\n    setLoading(false);\n    if (item.text !== 'okay') {\n      // Return an object containing the form errors that may come from a server side validation\n      return {\n        text: `${item.text} for text has been denied by the server, please change it to \"okay\".`\n      };\n    }\n    onItem(item);\n    onDelta(delta);\n  }, [onDelta, onItem]);\n  const {\n    form,\n    field,\n    modified,\n    onReset\n  } = useCorn({\n    item,\n    onChange: handleChange,\n    onSubmit: handleSubmit\n  });\n  return <form {...form} style={loading ? {\n    pointerEvents: 'none',\n    opacity: 0.5\n  } : undefined}>\n      <Text required {...field('text')}>\n        Text\n      </Text>\n\n      <Number required {...field('number')}>\n        Number\n      </Number>\n\n      <ButtonRow>\n        <button disabled={!modified}>\n          Submit <small>(simulated 1s delay)</small>\n        </button>\n        <button type=\"button\" disabled={!modified} onClick={onReset}>\n          Reset\n        </button>\n      </ButtonRow>\n    </form>;\n});\nexport const CornStory = () => {\n  return <Story Chapter={CornForm} initialItem={{}} />;\n};\nCornStory.parameters = {\n  ...CornStory.parameters,\n  docs: {\n    ...CornStory.parameters?.docs,\n    source: {\n      originalSource: \"() => {\\n  return <Story Chapter={CornForm} initialItem={{}} />;\\n}\",\n      ...CornStory.parameters?.docs?.source\n    }\n  }\n};"],"names":["serverErrors_stories","CornForm","memo","item","onItem","onTransient","onDelta","onErrors","loading","setLoading","useState","handleChange","useCallback","transient","delta","errors","handleSubmit","resolve","form","field","modified","onReset","useCorn","jsxs","jsx","Text","Number","ButtonRow","CornStory","Story","_a","_c","_b"],"mappings":"iYAKA,MAAAA,EAAA,CACA,MAAA,yBACA,WAAA,CACA,QAAA,CACA,UAAA,EACA,CACA,CACA,EACAC,EAAAC,OAAA,CAAA,CACA,KAAAC,EACA,OAAAC,EACA,YAAAC,EACA,QAAAC,EACA,SAAAC,CACA,IAAA,CACA,KAAA,CAAAC,EAAAC,CAAA,EAAAC,WAAA,EAAA,EACAC,EAAAC,EAAA,YAAA,CAAAC,EAAAC,EAAAC,IAAA,CACAV,EAAAQ,CAAA,EACAN,EAAAQ,CAAA,CAAA,EACA,CAAAR,EAAAF,CAAA,CAAA,EACAW,EAAAJ,EAAAA,YAAA,MAAAT,EAAAW,IAAA,CAKAX,GAHAM,EAAA,EAAA,EACA,MAAA,IAAA,QAAAQ,GAAA,WAAA,IAAAA,EAAA,EAAA,GAAA,CAAA,EACAR,EAAA,EAAA,EACAN,EAAA,OAAA,OAEA,MAAA,CACA,KAAA,GAAAA,EAAA,0EAAA,EAGAC,EAAAD,CAAA,EACAG,EAAAQ,CAAA,CAAA,EACA,CAAAR,EAAAF,CAAA,CAAA,EACA,CACA,KAAAc,EACA,MAAAC,EACA,SAAAC,EACA,QAAAC,GACAC,EAAA,CACA,KAAAnB,EACA,SAAAQ,EACA,SAAAK,CAAA,CACA,EACA,OAAAO,EAAA,OAAA,CAAA,GAAAL,EAAA,MAAAV,EAAA,CACA,cAAA,OACA,QAAA,EAAA,EACA,OACA,SAAA,CAAAgB,EAAAC,GAAA,SAAA,GAAA,GAAAN,EAAA,MAAA,EAAA,SAEA,OAAA,EAEAK,EAAAE,GAAA,SAAA,GAAA,GAAAP,EAAA,QAAA,EAAA,SAEA,SAAA,IAEAQ,EACA,CAAA,SAAA,CAAAJ,EAAA,SAAA,CAAA,SAAA,CAAAH,EAAA,SAAA,CAAA,UACAI,EAAA,SAAA,SAAA,sBAAA,CAAA,CAAA,EACA,EACAA,EAAA,UAAA,KAAA,SAAA,SAAA,CAAAJ,EAAA,QAAAC,EAAA,SAEA,OAAA,CAAA,CAAA,EACA,CACA,CAAA,CAAA,CACA,CAAA,EACAO,EAAA,MACAC,EAAA,CAAA,QAAA5B,EAAA,YAAA,CAAA,CAAA,CAAA,YAEA2B,EAAA,WAAA,CACA,GAAAA,EAAA,WACA,KAAA,CACA,IAAAE,EAAAF,EAAA,aAAA,YAAAE,EAAA,KACA,OAAA,CACA,eAAA;AAAA;AAAA,GACA,IAAAC,GAAAC,EAAAJ,EAAA,aAAA,YAAAI,EAAA,OAAA,YAAAD,EAAA,MACA,CACA,CACA,EAAAH,EAAA,aAAA,CAAA,YAAA,GAAA,QAAA,GAAA,YAAA"}