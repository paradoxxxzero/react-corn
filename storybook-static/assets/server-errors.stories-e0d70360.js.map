{"version":3,"file":"server-errors.stories-e0d70360.js","sources":["../../stories/overview/server-errors.stories.jsx"],"sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\nimport { useCorn } from '@react-corn/core';\nimport { ButtonRow, Number, Text } from '@react-corn/simple';\nimport { memo, useCallback, useState } from 'react';\nimport { Story } from '../helpers/Story';\nexport default {\n  title: 'Overview/server-errors',\n  parameters: {\n    options: {\n      showPanel: true\n    }\n  }\n};\nconst CornForm = memo(({\n  item,\n  onItem,\n  onTransient,\n  onDelta,\n  onErrors\n}) => {\n  const [loading, setLoading] = useState(false);\n  const handleChange = useCallback((transient, delta, errors) => {\n    onTransient(transient);\n    onErrors(errors);\n  }, [onErrors, onTransient]);\n  const handleSubmit = useCallback(async (item, delta) => {\n    // Simulate an async wait\n    setLoading(true);\n    await new Promise(resolve => setTimeout(() => resolve(), 1000));\n    setLoading(false);\n    if (item.text !== 'okay') {\n      // Return an object containing the form errors that may come from a server side validation\n      return {\n        text: `${item.text} for text has been denied by the server, please change it to \"okay\".`\n      };\n    }\n    onItem(item);\n    onDelta(delta);\n  }, [onDelta, onItem]);\n  const {\n    form,\n    field,\n    modified,\n    onReset\n  } = useCorn({\n    item,\n    onChange: handleChange,\n    onSubmit: handleSubmit\n  });\n  return <form {...form} style={loading ? {\n    pointerEvents: 'none',\n    opacity: 0.5\n  } : undefined}>\n      <Text required {...field('text')}>\n        Text\n      </Text>\n\n      <Number required {...field('number')}>\n        Number\n      </Number>\n\n      <ButtonRow>\n        <button disabled={!modified}>\n          Submit <small>(simulated 1s delay)</small>\n        </button>\n        <button type=\"button\" disabled={!modified} onClick={onReset}>\n          Reset\n        </button>\n      </ButtonRow>\n    </form>;\n});\nexport const CornStory = () => {\n  return <Story Chapter={CornForm} initialItem={{}} />;\n};\nCornStory.parameters = {\n  ...CornStory.parameters,\n  docs: {\n    ...CornStory.parameters?.docs,\n    source: {\n      originalSource: \"() => {\\n  return <Story Chapter={CornForm} initialItem={{}} />;\\n}\",\n      ...CornStory.parameters?.docs?.source\n    }\n  }\n};"],"names":["serverErrors_stories","CornForm","memo","item","onItem","onTransient","onDelta","onErrors","loading","setLoading","useState","handleChange","useCallback","transient","delta","errors","handleSubmit","resolve","form","field","modified","onReset","useCorn","jsxs","jsx","Text","Number","ButtonRow","CornStory","Story","_a","_c","_b"],"mappings":"6XAKA,MAAeA,EAAA,CACb,MAAO,yBACP,WAAY,CACV,QAAS,CACP,UAAW,EACb,CACF,CACF,EACMC,EAAWC,OAAK,CAAC,CACrB,KAAAC,EACA,OAAAC,EACA,YAAAC,EACA,QAAAC,EACA,SAAAC,CACF,IAAM,CACJ,KAAM,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtCC,EAAeC,EAAA,YAAY,CAACC,EAAWC,EAAOC,IAAW,CAC7DV,EAAYQ,CAAS,EACrBN,EAASQ,CAAM,CAAA,EACd,CAACR,EAAUF,CAAW,CAAC,EACpBW,EAAeJ,EAAAA,YAAY,MAAOT,EAAMW,IAAU,CAKlDX,GAHJM,EAAW,EAAI,EACT,MAAA,IAAI,QAAmBQ,GAAA,WAAW,IAAMA,EAAQ,EAAG,GAAI,CAAC,EAC9DR,EAAW,EAAK,EACZN,EAAK,OAAS,OAET,MAAA,CACL,KAAM,GAAGA,EAAK,0EAAA,EAGlBC,EAAOD,CAAI,EACXG,EAAQQ,CAAK,CAAA,EACZ,CAACR,EAASF,CAAM,CAAC,EACd,CACJ,KAAAc,EACA,MAAAC,EACA,SAAAC,EACA,QAAAC,GACEC,EAAQ,CACV,KAAAnB,EACA,SAAUQ,EACV,SAAUK,CAAA,CACX,EACD,OAAQO,EAAA,OAAA,CAAM,GAAGL,EAAM,MAAOV,EAAU,CACtC,cAAe,OACf,QAAS,EAAA,EACP,OACA,SAAA,CAAAgB,EAACC,GAAK,SAAQ,GAAE,GAAGN,EAAM,MAAM,EAAG,SAElC,OAAA,EAEAK,EAACE,GAAO,SAAQ,GAAE,GAAGP,EAAM,QAAQ,EAAG,SAEtC,SAAA,IAECQ,EACC,CAAA,SAAA,CAACJ,EAAA,SAAA,CAAO,SAAU,CAACH,EAAU,SAAA,CAAA,UACpBI,EAAC,SAAM,SAAoB,sBAAA,CAAA,CAAA,EACpC,EACAA,EAAC,UAAO,KAAK,SAAS,SAAU,CAACJ,EAAU,QAASC,EAAS,SAE7D,OAAA,CAAA,CAAA,EACF,CACF,CAAA,CAAA,CACJ,CAAC,EACYO,EAAY,MACfC,EAAM,CAAA,QAAS5B,EAAU,YAAa,CAAI,CAAA,CAAA,YAEpD2B,EAAU,WAAa,CACrB,GAAGA,EAAU,WACb,KAAM,CACJ,IAAGE,EAAAF,EAAU,aAAV,YAAAE,EAAsB,KACzB,OAAQ,CACN,eAAgB;AAAA;AAAA,GAChB,IAAGC,GAAAC,EAAAJ,EAAU,aAAV,YAAAI,EAAsB,OAAtB,YAAAD,EAA4B,MACjC,CACF,CACF"}